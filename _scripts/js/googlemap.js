var _mapSettings,_mapData,_mapConfig,_cMarker="",_googleMap=null,_jsonFiles=null;configMap=function(e){_jsonFiles=e,$.getJSON("_datastore/maps/"+_jsonFiles[0]+".json",function(e){_mapConfig=e;var t={};$.getJSON("_datastore/maps/"+_jsonFiles[1]+".json",function(e){_mapData=e,loadMap(t)})})},loadMap=function(e){_mapSettings={zoom:_mapConfig.config.zooms,type:e.type?e.type:"lists",level:_mapConfig.config.zooms.start,inMotion:!1},m=document.createElement("script"),m.setAttribute("src","https://maps.googleapis.com/maps/api/js?key="+_mapConfig.config.apikey+"&callback=initMap"),document.body.appendChild(m)},initMap=function(){function e(){var e={url:"_ui/maps/startmarkersmall.png",scaledSize:new google.maps.Size(_mapConfig.styling.markersizes[_mapConfig.config.zooms.start][0],_mapConfig.styling.markersizes[_mapConfig.config.zooms.start][1])},t=new google.maps.Marker({position:new google.maps.LatLng(_mapConfig.styling.startmarker.position.lat,_mapConfig.styling.startmarker.position.lon),map:_googleMap,icon:e});_mapData.contentArrays.startMarkerArray.push(t)}$.post("_scripts/php/mapnav.php",{config:_jsonFiles[0],data:_jsonFiles[1]},function(e){$(_mapConfig.config.navtarget).prepend(e),_mapData.levels[_mapSettings.zoom.start].categories&&showHideCategoryNav(!0),$("div.neo__map-container div.neo__map-categorynav > ul > li:not(.noscroll) div").mCustomScrollbar({axis:"y",scrollbarPosition:"inside",alwaysShowScrollbar:1,mouseWheel:{enable:!0,axis:"y"}})}),mm=document.createElement("script"),mm.setAttribute("src","_scripts/js/mapmarkerwithlabel.js"),document.body.appendChild(mm),_mapData.contentArrays={markersArray:[],infoWindowArray:[],overlaysArray:[],polygonsArray:[],streetviewsArray:[],timeringsArray:[],retainArray:[],startMarkerArray:[]},void 0!==_mapConfig.styling.startmarker&&""!=_mapConfig.styling.startmarker&&setTimeout(function(){e()},1e3);var t=0,a=null;if(_mapData.levels[_mapSettings.zoom.start].categories)var a=Object.keys(_mapData.levels[_mapSettings.zoom.start].categories);var o=!1;for(x in _mapData.levels[_mapSettings.zoom.start].categories){if(_mapData.levels[_mapSettings.zoom.start].categories[x].startopen&&!0===_mapData.levels[_mapSettings.zoom.start].categories[x].startopen){var n=a[t];_mapData.levels[_mapSettings.level].categories[n].markers&&setTimeout(function(){createContent("markers",n)},1e3),_mapData.levels[_mapSettings.level].categories[n].overlays&&setTimeout(function(){createContent("overlays",n)},1e3),_mapData.levels[_mapSettings.level].categories[n].polygons&&setTimeout(function(){createContent("polygons",n)},1e3),_mapData.levels[_mapSettings.level].categories[n].streetviews&&!0===_mapConfig.styling.streetview&&setTimeout(function(){createContent("streetviews",n)},1e3),o=!0}t++}if(void 0!==_mapData.levels[_mapSettings.zoom.start].markers&&setTimeout(function(){createContent("markers","")},1e3),void 0!==_mapData.levels[_mapSettings.zoom.start].overlays&&setTimeout(function(){createContent("overlays","")},1e3),void 0!==_mapData.levels[_mapSettings.zoom.start].polygons&&setTimeout(function(){createContent("polygons","")},1e3),void 0!==_mapData.levels[_mapSettings.zoom.start].streetviews&&!0===_mapConfig.styling.streetview&&setTimeout(function(){createContent("streetviews","")},1e3),_googleMap=new google.maps.Map(document.getElementById(_mapConfig.config.target),{center:_mapConfig.config.mapcenter,zoom:_mapSettings.zoom[_mapSettings.zoom.start],disableDefaultUI:!0,scrollwheel:!1,draggable:_mapConfig.config.dragbounds.allowdragging,disableDoubleClickZoom:!0,scaleControl:1==_mapConfig.config.showscale,mapTypeId:_mapConfig.styling.maptype}),_mapConfig.styling.customstyle&&!0===_mapConfig.styling.customstyle){var s=new google.maps.StyledMapType(styleObject,{name:"Custom Style"});_googleMap.mapTypes.set("custom_style",s),_googleMap.setMapTypeId("custom_style")}if(!0===_mapConfig.styling.streetview&&$(".neo__map-container").prepend('<div id="streetviewcontainer"><div class="close" title="Click here to close streetview">X</div></div>'),!0===_mapConfig.styling.showtransit&&showTransit(),1==_mapConfig.config.dragbounds.allowdragging){var l=new google.maps.LatLngBounds(new google.maps.LatLng(_mapConfig.config.dragbounds.southwest),new google.maps.LatLng(_mapConfig.config.dragbounds.northeast));google.maps.event.addListener(_googleMap,"dragend",function(){if(!l.contains(_googleMap.getCenter())){var e=_googleMap.getCenter(),t=e.lng(),a=e.lat(),o=l.getNorthEast().lng(),n=l.getNorthEast().lat(),s=l.getSouthWest().lng(),i=l.getSouthWest().lat();t<s&&(t=s),t>o&&(t=o),a<i&&(a=i),a>n&&(a=n),_googleMap.panTo(new google.maps.LatLng(a,t))}})}document.addEventListener("touchmove",function(e){e.preventDefault();var t=e.touches[0];return console.log(e.touches.length),!1},!1)},document.body.addEventListener("touchmove",tblock,!0);var tblock=function(e){return e.touches.length>1&&e.preventDefault(),!1};$(document).on("click",".js_toggle",function(e){"terrain"==$(this).attr("data-type")?showHideTerrain($(this)):"rings"==$(this).attr("data-type")&&showHideRings()}),$(document).on("click","li[data-type=locator]",function(e){function t(e){window.location.href="http://maps.google.com/maps?saddr="+e.coords.latitude+","+e.coords.longitude+"&daddr="+_mapConfig.styling.startmarker.position.lat+","+_mapConfig.styling.startmarker.position.lon}navigator.geolocation?navigator.geolocation.getCurrentPosition(t):alert("I'm sorry, this feature is disabled or unsupported by your browser.")}),showHideTerrain=function(a){"terrain"!=_googleMap.getMapTypeId()?(a.addClass("active"),_googleMap.setMapTypeId(google.maps.MapTypeId.TERRAIN)):(a.removeClass("active"),mapTypeId="google.maps.MapTypeId."+_mapConfig.styling.maptype.toUpperCase(),_googleMap.setMapTypeId(eval(mapTypeId)))},showHideRings=function(){function e(e,t,a){var o=Math.PI/180,n=180/Math.PI,s=3963,l=new google.maps.LatLngBounds,i=60,r=t/3963*n,p=r/Math.cos(e.lat()*o),g=new Array;if(1==a)var m=0,c=61;else var m=61,c=0;for(var _=m;1==a?_<c:_>c;_+=a){var v=Math.PI*(_/30);ey=e.lng()+p*Math.cos(v),ex=e.lat()+r*Math.sin(v),g.push(new google.maps.LatLng(ex,ey)),l.extend(g[g.length-1])}return g}if(_mapData.contentArrays.timeringsArray.length>0){$("li[data-type=rings]").removeClass("active"),$("li[data-type=rings]").removeClass("open");for(var t=0;t<_mapData.contentArrays.timeringsArray.length;t++)_mapData.contentArrays.timeringsArray[t].setMap(null);_mapData.contentArrays.timeringsArray.length=0}else{$("li[data-type=rings]").addClass("active"),$("li[data-type=rings]").addClass("open");var a=_mapData.levels[_mapSettings.level].timerings.rings;for(x in a){if(void 0!==a[x].fillColor&&""!=a[x].fillColor)var o=new google.maps.Circle({strokeColor:a[x].strokeColor,strokeOpacity:a[x].strokeOpacity,strokeWeight:a[x].strokeWeight,fillColor:a[x].fillColor,fillOpacity:a[x].fillOpacity,map:_googleMap,center:{lat:_mapData.levels[_mapSettings.level].timerings.center.lat,lng:_mapData.levels[_mapSettings.level].timerings.center.lon},radius:1e3*a[x].radius});else var n={path:"M 0,-1 0,1",strokeOpacity:a[x].strokeOpacity,strokeColor:a[x].strokeColor,strokeWeight:a[x].strokeWeight,scale:4},o=new google.maps.Polyline({path:e(new google.maps.LatLng(_mapData.levels[_mapSettings.level].timerings.center.lat,_mapData.levels[_mapSettings.level].timerings.center.lon),a[x].radius,1),strokeOpacity:void 0!==a[x].dashed&&0!=a[x].dashed[0]?0:a[x].strokeOpacity,strokeColor:a[x].strokeColor,icons:void 0!==a[x].dashed&&0!=a[x].dashed[0]?[{icon:n,offset:a[x].dashed[1],repeat:a[x].dashed[2]+"px"}]:"",strokeWeight:a[x].strokeWeight,map:_googleMap});_mapData.contentArrays.timeringsArray.push(o)}$("li[data-type=rings]").addClass("active")}},showHideCategoryNav=function(e){$("#level-"+_mapSettings.level).css({display:"block"}),e?$(".js-mapcategorynav").delay(250).fadeIn(500):$(".js-mapcategorynav").fadeOut(500,function(){$(".js-mapcategorynav > ul > li").removeClass("open"),$(".js-mapcategory").removeClass("active"),$(".js-mapcategorynav > ul").css({display:"none"})})},$(document).on("click",".js-mapzoom",function(e){target=$(this).attr("rel"),$(".neo__map-container ul li:not([data-type=terrain])").removeClass("active"),$(this).addClass("active"),$("li.open div ol li").removeClass("active"),!1===_mapSettings.inMotion&&target!=_mapSettings.level&&(_mapSettings.inMotion=!0,step=1,clearMapContent("zoom"),_googleMap.panTo(_mapConfig.config.mapcenter),_mapData.contentArrays.startMarkerArray[0].setMap(null),_mapData.contentArrays.startMarkerArray.length=0,animateZoom=function(){currentZoom=_googleMap.getZoom(),_mapSettings.zoom[target]>currentZoom?_googleMap.setZoom(currentZoom+=step):_mapSettings.zoom[target]<currentZoom&&_googleMap.setZoom(currentZoom-=step),_googleMap.getZoom()!=_mapSettings.zoom[target]?animateZoom():setTimeout(function(){zoomDone(target)},200)},zoomDone=function(e){_mapSettings.inMotion=!1,_mapSettings.level=e;var t=[_mapConfig.styling.markersizes[_mapSettings.level][0],_mapConfig.styling.markersizes[_mapSettings.level][1]];void 0!==_mapData.levels[e].center&&void 0!==_mapData.levels[e].center.lat&&""!=_mapData.levels[e].center.lat&&void 0!==_mapData.levels[e].center.lon&&""!=_mapData.levels[e].center.lon&&_googleMap.setCenter(new google.maps.LatLng(_mapData.levels[e].center.lat,_mapData.levels[e].center.lon));var a={url:"_ui/maps/startmarkersmall.png",scaledSize:new google.maps.Size(t[0],t[1])},o=new google.maps.Marker({position:new google.maps.LatLng(_mapConfig.styling.startmarker.position.lat,_mapConfig.styling.startmarker.position.lon),map:_googleMap,icon:a});_mapData.contentArrays.startMarkerArray.push(o),_mapData.levels[e].categories&&setTimeout(function(){showHideCategoryNav(!0)},150),_mapData.levels[e].markers&&createContent("markers",""),_mapData.levels[e].overlays&&createContent("overlays",""),_mapData.levels[e].polygons&&createContent("polygons",""),_mapData.levels[e].streetviews&&!0===_mapConfig.styling.streetview&&createContent("streetviews","")},"block"==$(".js-mapcategorynav").css("display")?(showHideCategoryNav(!1),setTimeout(function(){animateZoom()},500)):animateZoom())}),$(document).on("click",".js-mapcategory",function(e){clearMapContent("category"),void 0!==_mapData.levels[_mapSettings.level].center&&void 0!==_mapData.levels[_mapSettings.level].center.lat&&""!=_mapData.levels[_mapSettings.level].center.lat&&void 0!==_mapData.levels[_mapSettings.level].center.lon&&""!=_mapData.levels[_mapSettings.level].center.lon?_googleMap.setCenter(new google.maps.LatLng(_mapData.levels[_mapSettings.level].center.lat,_mapData.levels[_mapSettings.level].center.lon)):_googleMap.panTo(_mapConfig.config.mapcenter),$("li.open div ol li").removeClass("clickedme"),$("div.neo__map-container > div.neo__map-categorynav > ul > li div").mCustomScrollbar("scrollTo",0,0),"lists"==_mapConfig.styling.flags||"both"==_mapConfig.styling.flags?(catopen=$(this).parent().hasClass("open"),$(".js-mapcategorynav > ul > li").removeClass("open"),$(".js-mapcategory").removeClass("active"),catopen||($(this).parent().addClass("open"),$(this).addClass("active"),_mapData.levels[_mapSettings.level].categories[$(this).attr("rel")].markers&&createContent("markers",$(this).attr("rel")),_mapData.levels[_mapSettings.level].categories[$(this).attr("rel")].overlays&&createContent("overlays",$(this).attr("rel")),_mapData.levels[_mapSettings.level].categories[$(this).attr("rel")].polygons&&createContent("polygons",$(this).attr("rel")),_mapData.levels[_mapSettings.level].categories[$(this).attr("rel")].streetviews&&!0===_mapConfig.styling.streetview&&createContent("streetviews",$(this).attr("rel")))):"flags"==_mapConfig.styling.flags&&(active=$(this).hasClass("active"),$(".js-mapcategory").removeClass("active"),active||(createMarkers($(this).attr("rel")),$(this).addClass("active")))}),createContent=function(e,t){_mapSettings.inMotion=!0,_mapData.levels[_mapSettings.level].categories&&""!=t?(categories=_mapData.levels[_mapSettings.level].categories,category=categories[t],theseItems=category[e],keys=Object.keys(category[e])):_mapData.levels[_mapSettings.level][e]&&(category=_mapData.levels[_mapSettings.level],keys=Object.keys(_mapData.levels[_mapSettings.level][e]),theseItems=_mapData.levels[_mapSettings.level][e],t=_mapSettings.level),cnt=0;var a=window["add"+e];for(xx in theseItems)a(theseItems[xx],Array(category,t),keys[cnt]),cnt++;_mapSettings.inMotion=!1},addstreetviews=function(e,t,a){var o=new MarkerWithLabel({position:{lat:e.lat,lng:e.lon},icon:{url:e.image?"_ui/maps/"+e.image:"_ui/maps/emptymarker.png",origin:new google.maps.Point(0,0)},labelContent:"true"!=t[0].usename||e.image?"lists"!=_mapConfig.styling.flags&&"both"!=_mapConfig.styling.flags||e.image||"block"!=$(".js-mapcategorynav").css("display")?"":String(_mapData.contentArrays.streetviewsArray.length+1):a,labelAnchor:new google.maps.Point(_mapConfig.styling.markersizes[_mapConfig.config.zooms.start][0]/2,_mapConfig.styling.markersizes[_mapConfig.config.zooms.start][1]),labelClass:"neo__map-marker"+(t[0].class&&""!=t[0].class&&!e.image?" "+t[0].class:""),animation:null,draggable:!1,raiseOnDrag:!1,map:_googleMap,title:a,id:_mapData.contentArrays.streetviewsArray.length});o.addListener("click",function(t){$("#streetviewcontainer").css({display:"block"});var a=new google.maps.StreetViewPanorama(document.getElementById("streetviewcontainer"),{position:{lat:e.lat,lng:e.lon},pov:{heading:34,pitch:10}});_googleMap.setStreetView(a)}),retain=void 0!==e.retain&&1==e.retain,retain,_mapData.contentArrays.streetviewsArray.push(o)},$(document).on("click","#streetviewcontainer > div.close",function(){$("#streetviewcontainer").css({display:"none"})}),addpolygons=function(e,t,a){if("shape"==e.type){var o=new google.maps.Polygon({paths:e.path,strokeColor:e.stroke[0],strokeOpacity:e.stroke[1],strokeWeight:e.stroke[2],fillColor:e.fill[0],fillOpacity:e.fill[1]});o.setMap(_googleMap)}else if("svg"==e.type)var n={path:e.path,strokeColor:e.stroke[0],strokeOpacity:e.stroke[1],strokeWeight:e.stroke[2],fillColor:e.fill[0],fillOpacity:e.fill[1],scale:e.scale,rotation:void 0!==e.rotation&&e.rotation>0?e.rotation:0},o=new google.maps.Marker({position:e.center,icon:n,map:_googleMap,title:a});else if("line"==e.type){var s=[];if(void 0!==e.symbol&&0!=e.symbol)for(var l=100/e.symbols[1],i="",r=e.symbols[1]+(!1===e.symbols[2][0]?0:-1),p=0;p<=r;p++)i=void 0!=e.symbol[0]&&e.symbol[0].length>1?"open"==e.symbols[2]?"forward"==e.symbol[1]?google.maps.SymbolPath.FORWARD_OPEN_ARROW:google.maps.SymbolPath.BACKWARD_OPEN_ARROW:"forward"==e.symbol[1]?google.maps.SymbolPath.FORWARD_CLOSED_ARROW:google.maps.SymbolPath.BACKWARD_CLOSED_ARROW:e.symbol,s[s.length]={icon:{path:i,strokeColor:e.symbols[0][0],strokeOpacity:e.symbols[0][1],strokeWeight:e.symbols[0][2],fillColor:e.symbols[0][3],fillOpacity:e.symbols[0][4],scale:e.symbols[0][5]},offset:l*p+"%"};if(void 0!==e.stroke[3]&&""!=e.stroke[3]){var g={path:e.stroke[3][2],strokeOpacity:1,strokeColor:e.stroke[3][1],scale:4};s[s.length]={icon:g,offset:0,repeat:e.stroke[3][0]+"px"}}var o=new google.maps.Polyline({path:e.path,geodesic:!0,strokeColor:e.stroke[0],strokeOpacity:e.stroke[1],strokeWeight:e.stroke[2],icons:s});if(o.setMap(_googleMap),void 0!==e.symbols&&1==e.symbols[2][0]){var m="backward"==e.symbols[2][2]?200:0,r=0,c=void 0!==e.symbols[2][3]&&e.symbols[2][3]>0&&e.symbols[2][3],_,v=e.symbols[2][1];_=window.setInterval(function(){"backward"==e.symbols[2][2]&&0==m&&(m=200),m="forward"==e.symbols[2][2]?(m+1)%200:(m-1)%200;var t=o.get("icons");t[0].offset=m/2+"%",o.set("icons",t),0!=c&&199==m&&++r==c&&clearInterval(_)},v)}}void 0!==e.retain&&1==e.retain?_mapData.contentArrays.retainArray.push(o):_mapData.contentArrays.polygonsArray.push(o)},addoverlays=function(e,t,a){function o(e,t,a,o){this.bounds_=e,this.image_=t,this.map_=a,this.retain_=o,this.div_=null,this.setMap(a)}var n=new google.maps.LatLngBounds(new google.maps.LatLng(e.swlat,e.swlon),new google.maps.LatLng(e.nelat,e.nelon));o.prototype=new google.maps.OverlayView;var s=new o(n,"_ui/maps/"+e.image,_googleMap,void 0!==e.retain&&1==e.retain);o.prototype.onAdd=function(){var e=document.createElement("div");e.style.borderStyle="none",e.style.borderWidth="0px",e.style.position="absolute";var t=document.createElement("img");t.src=this.image_,t.style.width="100%",t.style.height="100%",t.style.position="absolute",e.appendChild(t),this.div_=e,this.getPanes().overlayLayer.appendChild(e),0==this.retain_?_mapData.contentArrays.overlaysArray.push(s):_mapData.contentArrays.retainArray.push(s)},o.prototype.draw=function(){var e=this.getProjection(),t=e.fromLatLngToDivPixel(this.bounds_.getSouthWest()),a=e.fromLatLngToDivPixel(this.bounds_.getNorthEast()),o=this.div_;o.style.left=t.x+"px",o.style.top=a.y+"px",o.style.width=a.x-t.x+"px",o.style.height=t.y-a.y+"px"},o.prototype.onRemove=function(){this.div_.parentNode.removeChild(this.div_),this.div_=null}},addmarkers=function(e,t,a){var o=new MarkerWithLabel({position:{lat:e.lat,lng:e.lon},icon:{url:e.image?"_ui/maps/"+e.image:"_ui/maps/emptymarker.png",origin:new google.maps.Point(0,0)},labelContent:"true"!=t[0].usename||e.image?"lists"!=_mapConfig.styling.flags&&"both"!=_mapConfig.styling.flags||e.image||"block"!=$(".js-mapcategorynav").css("display")?"":String(_mapData.contentArrays.markersArray.length+1):a,labelAnchor:new google.maps.Point(_mapConfig.styling.markersizes[_mapConfig.config.zooms.start][0]/2,_mapConfig.styling.markersizes[_mapConfig.config.zooms.start][1]),labelClass:"neo__map-marker"+(t[0].class&&""!=t[0].class&&!e.image?" "+t[0].class:"")+(e.class&&""!=e.class?" "+e.class:""),animation:null,draggable:!1,raiseOnDrag:!1,map:_googleMap,title:a,id:_mapData.contentArrays.markersArray.length});if(("flags"==_mapConfig.styling.flags||"both"==_mapConfig.styling.flags)&&"true"!=t[0].usename&&!(void 0!==t[0].clickable&&!0!==t[0].clickable||void 0!==e.clickable&&!0!==e.clickable)){infoWindow=new google.maps.InfoWindow({maxWidth:200,id:_mapData.contentArrays.infoWindowArray.length}),_mapData.contentArrays.infoWindowArray.push(infoWindow),thisInfo=_mapData.contentArrays.infoWindowArray[_mapData.contentArrays.infoWindowArray.length-1];var n=t[1].replace(/ |&amp;|&eacute;/g,"");buildInfoWindow=function(e,t){var a=!1;return void 0!==e.transit&&(a="<p>Public Transit:<br />",Object.keys(e.transit).forEach(function(t){a+=(void 0!==e.transit[t].url&&""!=e.transit[t].url?'<a href="'+e.transit[t].url+'" title="View route and schedule" target="_blank">':"")+t+(void 0!==e.transit[t].url&&""!=e.transit[t].url?"</a>":"")+"<br />"}),a+="</p>"),'<div class="neo__map-markerinfo"><h1>'+t+"</h1>"+(e.details&&""!=e.details?"<p>"+e.details:"</p>")+(e.directions&&1==e.directions?'<p><a href="http://maps.google.com/maps?saddr='+e.lat+","+e.lon+"&daddr="+_mapConfig.styling.startmarker.position.lat+","+_mapConfig.styling.startmarker.position.lon+'" title="Click here to get directions to this location" target="_blank">Get Directions -> </a></p>':"")+(e.website&&""!=e.website?'<p><a href="'+e.website+'" title="Click here to get view this location website" target="_blank">View Website -> </a></p>':"")+(e.line&&""!=e.line?'<p><a href="'+e.line+'" title="Click here to view the schedules and maps for this line" target="_blank">Schedules and Maps -> </a></p>':"")+"</div>"},o.addListener("click",function(t){_googleMap.panTo({lat:e.lat,lng:e.lon}),thisInfo.setContent(buildInfoWindow(e,a)),thisInfo.open(_googleMap,o),_cMarker=o.title,$("li.open div ol li").removeClass("clickedme"),$("#"+n+"-"+o.id).addClass("clickedme"),$("#"+n+"-"+o.id).parent().parent().hasClass("mCSB_container")&&$(this).parent().parent().parent().mCustomScrollbar("scrollTo","#"+n+"-"+o.id)}),animateMarker=function(e){null!==e.getAnimation()?e.setAnimation(null):e.setAnimation(google.maps.Animation.BOUNCE)},infoWindow.addListener("closeclick",function(){$("li.open div ol li").removeClass("clickedme"),$(this).parent().parent().parent().mCustomScrollbar("scrollTo","top"),void 0!==_mapData.levels[_mapSettings.level].center&&void 0!==_mapData.levels[_mapSettings.level].center.lat&&""!=_mapData.levels[_mapSettings.level].center.lat&&void 0!==_mapData.levels[_mapSettings.level].center.lon&&""!=_mapData.levels[_mapSettings.level].center.lon?_googleMap.setCenter(new google.maps.LatLng(_mapData.levels[_mapSettings.level].center.lat,_mapData.levels[_mapSettings.level].center.lon)):_googleMap.panTo(_mapConfig.config.mapcenter)}),$(document).off("click","#"+n+"-"+_mapData.contentArrays.markersArray.length),$(document).on("click","#"+n+"-"+_mapData.contentArrays.markersArray.length,function(){thisInfo.setContent(buildInfoWindow(e,a)),$("li.open div ol li").removeClass("clickedme");for(x in _mapData.contentArrays.infoWindowArray)_mapData.contentArrays.infoWindowArray[x].close(),_mapData.contentArrays.infoWindowArray[x].isVisible;o.title!=_cMarker?($(this).addClass("clickedme"),_cMarker=o.title,thisInfo.open(_googleMap,o),_googleMap.panTo({lat:e.lat,lng:e.lon})):(_cMarker="",void 0!==_mapData.levels[_mapSettings.level].center&&void 0!==_mapData.levels[_mapSettings.level].center.lat&&""!=_mapData.levels[_mapSettings.level].center.lat&&void 0!==_mapData.levels[_mapSettings.level].center.lon&&""!=_mapData.levels[_mapSettings.level].center.lon?_googleMap.setCenter(new google.maps.LatLng(_mapData.levels[_mapSettings.level].center.lat,_mapData.levels[_mapSettings.level].center.lon)):_googleMap.panTo(_mapConfig.config.mapcenter))})}retain=void 0!==e.retain&&1==e.retain,0==retain?_mapData.contentArrays.markersArray.push(o):_mapData.contentArrays.retainArray.push(o)},clearMapContent=function(e){$(".js-mapcategorynav ul li ol li").removeClass("active");var t=["markersArray","infoWindowArray","overlaysArray","polygonsArray","streetviewsArray"];for(x in t){for(i=0;i<_mapData.contentArrays[t[x]].length;i++)_mapData.contentArrays[t[x]][i].setMap(null);_mapData.contentArrays[t[x]].length=0}if("zoom"==e){var t=["retainArray","timeringsArray"];for(x in t){for(i=0;i<_mapData.contentArrays[t[x]].length;i++)_mapData.contentArrays[t[x]][i].setMap(null);_mapData.contentArrays[t[x]].length=0}}},$(window).resize(function(){_googleMap&&($("li.open div ol li").removeClass("clickedme"),$(".js-mapcategorynav > ul > li").removeClass("open"),$(".js-mapcategory").removeClass("active"),$("div.neo__map-container > div.neo__map-categorynav > ul > li div").mCustomScrollbar("scrollTo",0,0),clearMapContent(),void 0!==_mapData.levels[_mapSettings.level].center&&void 0!==_mapData.levels[_mapSettings.level].center.lat&&""!=_mapData.levels[_mapSettings.level].center.lat&&void 0!==_mapData.levels[_mapSettings.level].center.lon&&""!=_mapData.levels[_mapSettings.level].center.lon?_googleMap.panTo(new google.maps.LatLng(_mapData.levels[_mapSettings.level].center.lat,_mapData.levels[_mapSettings.level].center.lon)):_googleMap.panTo(_mapConfig.config.mapcenter))}),showTransit=function(){(new google.maps.TransitLayer).setMap(_googleMap)},checkPosition=function(){},$("a[rel="+$("body").attr("id")+"]").addClass("active");